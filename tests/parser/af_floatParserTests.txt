!! Version 2
# Force the test runner to ensure the extension is loaded
!! functionhooks
af_float
!! endfunctionhooks

# This file tests the #af_float parser function

!! test
Test positive integer float
!! wikitext
{{#af_float: 10 }}
!! html
<p>float__^__10
</p>
!! end

!! test
Test positive float
!! wikitext
{{#af_float: 10.12 }}
!! html
<p>float__^__10.12
</p>
!! end

!! test
Test negative integer float
!! wikitext
{{#af_float: -10 }}
!! html
<p>float__^__-10
</p>
!! end

!! test
Test negative float
!! wikitext
{{#af_float: -10.12 }}
!! html
<p>float__^__-10.12
</p>
!! end

!! test
Test large float
!! wikitext
{{#af_float: 100000000000000000000000000000000.0 }}
!! html
<p>float__^__1.0E+32
</p>
!! end

!! test
Test large negative float
!! wikitext
{{#af_float: -100000000000000000000000000000000.0 }}
!! html
<p>float__^__-1.0E+32
</p>
!! end

!! test
Test large float as E notation
!! wikitext
{{#af_float: 1.0E+32 }}
!! html
<p>float__^__1.0E+32
</p>
!! end

!! test
Test large negative float as E notation
!! wikitext
{{#af_float: -1.0E+32 }}
!! html
<p>float__^__-1.0E+32
</p>
!! end

!! test
Test small float
!! wikitext
{{#af_float: 0.00000000000000000000000000000001 }}
!! html
<p>float__^__1.0E-32
</p>
!! end

!! test
Test small negative float
!! wikitext
{{#af_float: -0.00000000000000000000000000000001 }}
!! html
<p>float__^__-1.0E-32
</p>
!! end

!! test
Test small float as E notation
!! wikitext
{{#af_float: 1.0E-32 }}
!! html
<p>float__^__1.0E-32
</p>
!! end

!! test
Test small negative float as E notation
!! wikitext
{{#af_float: -1.0E-32 }}
!! html
<p>float__^__-1.0E-32
</p>
!! end

!! test
Test float is idempotent
!! wikitext
{{#af_float: 10.0 }}
{{#af_float: {{#af_float: 10.0 }} }}
!! html
<p>float__^__10
float__^__10
</p>
!! end

!! test
Test invalid type gives error
!! wikitext
{{#af_float: true }}
!! html
<p><span class="error">ArrayFunctions (<b>#af_float</b>): Could not match expected type <b>float</b> with actual type <b>string</b> for parameter <b>1</b> ("true").</span>
</p>
!! end

!! test
Test too many arguments
!! wikitext
{{#af_float: 1.0 | yes }}
!! html
<p><span class="error">ArrayFunctions (<b>#af_float</b>): Expected at most <b>1</b> positional parameter, <b>2</b> given.</span>
</p>
!! end
